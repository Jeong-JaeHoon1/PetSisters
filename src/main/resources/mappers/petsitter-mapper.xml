<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="petSitterMapper">

	<!-- PETSITTER 객체로 가공된 resultMap -->
	<resultMap id="petSitterResultSet" type="petSitter">
		<result column="P_NO" property="petSitterNo" />
		<result column="P_TITLE" property="petSitterTitle" />
		<result column="P_CONTENT" property="petSitterContent" />
		<result column="P_SERVICE" property="petSitterService" />
		<result column="CARE_LIST" property="careList" />
		<result column="P_MODE" property="petSitterMode" />
		<result column="USER_NO" property="userNo" />
	</resultMap>
	
	<!-- 펫시터 프로필 상세 조회용 쿼리문 -->
	<select id="selectPetSitter" parameterType="_int" resultMap="petSitterResultSet">
		SELECT P_NO
		     , P_TITLE
		     , P_CONTENT
		     , P_SERVICE
		     , CARE_LIST
		     , P_MODE
		     , USER_NO
		  FROM PETSITTER
		 WHERE P_NO = #{petSitterNo}
	</select>
	
	<!-- 펫시터 프로필 수정용 쿼리문 -->
	<update id="updatePetSitter" parameterType="petSitter">
		UPDATE PETSITTER
		   SET P_TITLE = #{petSitterTitle}
		     , P_CONTENT = #{petSitterContent}
		     , P_SERVICE = #{petSitterService}
		     , CARE_LIST = #{careList}
		     , P_MODE = #{petSitterMode}
		 WHERE P_NO = #{petSitterNo}
	</update>

	<!-- 게시글 총 갯수 구하는 쿼리문 -->
	<select id="selectListCount" resultType="_int">
		SELECT COUNT(*)
		  FROM PETSITTER
		 WHERE P_MODE = 'Y'
	</select>
	
	<!-- 게시글 리스트 조회용 쿼리문 -->
	<select id="selectList" resultMap="petSitterResultSet">
		SELECT P_NO
		     , P_TITLE
		     , CARE_LIST
		  FROM PETSITTER
		 WHERE P_MODE = 'Y'
	</select>

</mapper>













